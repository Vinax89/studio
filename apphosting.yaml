# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

runConfig:
  # Increase this value if you'd like to automatically spin up
  # more instances in response to increased traffic.
  maxInstances: 1
  cpu: 2
  memoryMiB: 4096

# Firebase environment variables
env:
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    value: ${NEXT_PUBLIC_FIREBASE_API_KEY}
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: ${NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN}
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: ${NEXT_PUBLIC_FIREBASE_PROJECT_ID}
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: ${NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET}
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: ${NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID}
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    value: ${NEXT_PUBLIC_FIREBASE_APP_ID}
    availability:
      - BUILD
      - RUNTIME
  - variable: GENKIT_MODEL
    value: googleai/gemini-2.5-flash # Optional override for the Genkit model
    availability:
      - RUNTIME
  - variable: CRON_SECRET
    value: ${CRON_SECRET}
    availability:
      - RUNTIME

scheduler:
  jobs:
    - name: housekeeping
      schedule: "0 0 * * *"  # daily at midnight
      httpTarget:
        uri: /api/cron/housekeeping
        httpMethod: GET
        headers:
          X-CRON-SECRET: ${CRON_SECRET}

